/*! cornerstone-wado-image-loader - 2.2.3 - 2019-09-11 | (c) 2016 Chris Hafey | https://github.com/cornerstonejs/cornerstoneWADOImageLoader */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("cornerstoneWADOImageLoader",[],r):"object"==typeof exports?exports.cornerstoneWADOImageLoader=r():e.cornerstoneWADOImageLoader=r()}(this,function(){return n={},a.m=t=[function(e,r,t){"use strict";r.a=function(e){for(var r,t=e[0],n=e[0],a=e.length,o=1;o<a;o++)r=e[o],t=Math.min(t,r),n=Math.max(n,r);return{min:t,max:n}}},function(e,r,t){"use strict";var m;function n(){if("undefined"==typeof CharLS)throw new Error("No JPEG-LS decoder loaded");if(!(m||(m=CharLS())&&m._jpegls_decode))throw new Error("JPEG-LS failed to initialize")}t.d(r,"b",function(){return n}),r.a=function(e,r){n();var t=function(e,r){var t=m._malloc(e.length);m.writeArrayToMemory(e,t);var n=m._malloc(4),a=m._malloc(4),o=m._malloc(4),i=m._malloc(4),l=m._malloc(4),s=m._malloc(4),u=m._malloc(4),c=m._malloc(4),f=m._malloc(4),d={result:m.ccall("jpegls_decode","number",["number","number","number","number","number","number","number","number","number","number","number"],[t,e.length,n,a,o,i,l,s,c,u,f]),width:m.getValue(o,"i32"),height:m.getValue(i,"i32"),bitsPerSample:m.getValue(l,"i32"),stride:m.getValue(s,"i32"),components:m.getValue(c,"i32"),allowedLossyError:m.getValue(u,"i32"),interleaveMode:m.getValue(f,"i32"),pixelData:void 0},p=m.getValue(n,"*");return d.bitsPerSample<=8?(d.pixelData=new Uint8Array(d.width*d.height*d.components),d.pixelData.set(new Uint8Array(m.HEAP8.buffer,p,d.pixelData.length))):r?(d.pixelData=new Int16Array(d.width*d.height*d.components),d.pixelData.set(new Int16Array(m.HEAP16.buffer,p,d.pixelData.length))):(d.pixelData=new Uint16Array(d.width*d.height*d.components),d.pixelData.set(new Uint16Array(m.HEAP16.buffer,p,d.pixelData.length))),m._free(t),m._free(p),m._free(n),m._free(a),m._free(o),m._free(i),m._free(l),m._free(s),m._free(c),m._free(f),d}(r,1===e.pixelRepresentation);if(0!==t.result&&6!==t.result)throw new Error("JPEG-LS decoder failed to decode frame (error code ".concat(t.result,")"));return e.columns=t.width,e.rows=t.height,e.pixelData=t.pixelData,e}},function(e,r,t){"use strict";var h;function a(e,r){var t=function(e,r,t){var n=h._malloc(e.length);h.writeArrayToMemory(e,n);var a=h._malloc(4),o=h._malloc(4),i=h._malloc(4),l=h._malloc(4),s=h._malloc(4),u=(new Date).getTime();if(0!==h.ccall("jp2_decode","number",["number","number","number","number","number","number","number"],[n,e.length,a,o,i,l,s]))return console.log("[opj_decode] decoding failed!"),h._free(n),h._free(h.getValue(a,"*")),h._free(i),h._free(l),h._free(o),void h._free(s);var c=h.getValue(a,"*"),f={length:h.getValue(o,"i32"),sx:h.getValue(i,"i32"),sy:h.getValue(l,"i32"),nbChannels:h.getValue(s,"i32"),perf_timetodecode:void 0,pixelData:void 0},d=f.sx*f.sy*f.nbChannels,p=new Int32Array(h.HEAP32.buffer,c,d);if(1===r)if(Uint8Array.from)f.pixelData=Uint8Array.from(p);else{f.pixelData=new Uint8Array(d);for(var m=0;m<d;m++)f.pixelData[m]=p[m]}else if(t)if(Int16Array.from)f.pixelData=Int16Array.from(p);else{f.pixelData=new Int16Array(d);for(var g=0;g<d;g++)f.pixelData[g]=p[g]}else if(Uint16Array.from)f.pixelData=Uint16Array.from(p);else{f.pixelData=new Uint16Array(d);for(var v=0;v<d;v++)f.pixelData[v]=p[v]}var x=(new Date).getTime();return f.perf_timetodecode=x-u,h._free(n),h._free(a),h._free(c),h._free(o),h._free(i),h._free(l),h._free(s),f}(r,e.bitsAllocated<=8?1:2,1===e.pixelRepresentation);return e.columns=t.sx,e.rows=t.sy,e.pixelData=t.pixelData,1<t.nbChannels&&(e.photometricInterpretation="RGB"),e}function o(e){if(!e.usePDFJS&&"undefined"==typeof OpenJPEG)throw new Error("OpenJPEG decoder not loaded");if(!(h||(h=OpenJPEG())&&h._jp2_decode))throw new Error("OpenJPEG failed to initialize")}t.d(r,"b",function(){return o}),r.a=function(e,r,t){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return o(t),n.usePDFJS||t.usePDFJS?function(e,r){var t=new JpxImage;t.parse(r);var n=t.tiles.length;if(1!==n)throw new Error("JPEG2000 decoder returned a tileCount of ".concat(n,", when 1 is expected"));return e.columns=t.width,e.rows=t.height,e.pixelData=t.tiles[0].items,e}(e,r):a(e,r)}},function(e,r,t){"use strict";r.a="2.2.3"},function(e,r,t){"use strict";t.d(r,"a",function(){return n});var a=t(0);function n(e){var r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],t=Object(a.a)(e.pixelData),n=!(o(e.smallestPixelValue)&&o(e.largestPixelValue));!0!==r||n?(e.smallestPixelValue=t.min,e.largestPixelValue=t.max):(e.smallestPixelValue!==t.min&&console.warn("Image smallestPixelValue tag is incorrect. Rendering performance will suffer considerably."),e.largestPixelValue!==t.max&&console.warn("Image largestPixelValue tag is incorrect. Rendering performance will suffer considerably."))}function o(e){return"number"==typeof e}},function(e,r,t){"use strict";var c=function(e,r){var t=r.buffer,n=r.byteOffset,a=r.length;return 16===e.bitsAllocated?(n%2&&(t=t.slice(n),n=0),0===e.pixelRepresentation?e.pixelData=new Uint16Array(t,n,a/2):e.pixelData=new Int16Array(t,n,a/2)):8===e.bitsAllocated||1===e.bitsAllocated?e.pixelData=r:32===e.bitsAllocated&&(n%2&&(t=t.slice(n),n=0),e.pixelData=new Float32Array(t,n,a/4)),e};var f=function(e,r){if(16===e.bitsAllocated){var t=r.buffer,n=r.byteOffset,a=r.length;n%2&&(t=t.slice(n),n=0),0===e.pixelRepresentation?e.pixelData=new Uint16Array(t,n,a/2):e.pixelData=new Int16Array(t,n,a/2);for(var o=0;o<e.pixelData.length;o++)e.pixelData[o]=(255&(i=e.pixelData[o]))<<8|i>>8&255}else 8===e.bitsAllocated&&(e.pixelData=r);var i;return e};var d=function(e,r){if(8===e.bitsAllocated)return e.planarConfiguration?function(e,r){for(var t=r,n=e.rows*e.columns,a=new ArrayBuffer(n*e.samplesPerPixel),o=new DataView(t.buffer,t.byteOffset),i=new Int8Array(t.buffer,t.byteOffset),l=new Int8Array(a),s=0,u=o.getInt32(0,!0),c=0;c<u;++c){s=c*n;var f=o.getInt32(4*(c+1),!0),d=o.getInt32(4*(c+2),!0);0===d&&(d=t.length);for(var p=n*u;f<d;){var m=i[f++];if(0<=m&&m<=127)for(var g=0;g<m+1&&s<p;++g)l[s]=i[f++],s++;else if(m<=-1&&-127<=m)for(var v=i[f++],x=0;x<1-m&&s<p;++x)l[s]=v,s++}}return e.pixelData=new Uint8Array(a),e}(e,r):function(e,r){for(var t=r,n=e.rows*e.columns,a=new ArrayBuffer(n*e.samplesPerPixel),o=new DataView(t.buffer,t.byteOffset),i=new Int8Array(t.buffer,t.byteOffset),l=new Int8Array(a),s=0,u=o.getInt32(0,!0),c=0;c<u;++c){s=c;var f=o.getInt32(4*(c+1),!0),d=o.getInt32(4*(c+2),!0);0===d&&(d=t.length);for(var p=n*u;f<d;){var m=i[f++];if(0<=m&&m<=127)for(var g=0;g<m+1&&s<p;++g)l[s]=i[f++],s+=e.samplesPerPixel;else if(m<=-1&&-127<=m)for(var v=i[f++],x=0;x<1-m&&s<p;++x)l[s]=v,s+=e.samplesPerPixel}}return e.pixelData=new Uint8Array(a),e}(e,r);if(16===e.bitsAllocated)return function(e,r){for(var t=r,n=e.rows*e.columns,a=new ArrayBuffer(n*e.samplesPerPixel*2),o=new DataView(t.buffer,t.byteOffset),i=new Int8Array(t.buffer,t.byteOffset),l=new Int8Array(a),s=o.getInt32(0,!0),u=0;u<s;++u){var c=0,f=0===u?1:0,d=o.getInt32(4*(u+1),!0),p=o.getInt32(4*(u+2),!0);for(0===p&&(p=t.length);d<p;){var m=i[d++];if(0<=m&&m<=127)for(var g=0;g<m+1&&c<n;++g)l[2*c+f]=i[d++],c++;else if(m<=-1&&-127<=m)for(var v=i[d++],x=0;x<1-m&&c<n;++x)l[2*c+f]=v,c++}}0===e.pixelRepresentation?e.pixelData=new Uint16Array(a):e.pixelData=new Int16Array(a);return e}(e,r);throw new Error("unsupported pixel format for RLE")};var p=function(e,r){if("undefined"==typeof JpegImage)throw new Error("No JPEG Baseline decoder loaded");var t=new JpegImage;return t.parse(r),t.colorTransform=!1,8===e.bitsAllocated?(e.pixelData=t.getData(e.columns,e.rows),e):16===e.bitsAllocated?(e.pixelData=t.getData16(e.columns,e.rows),e):void 0};var m=function(e,r){if("undefined"==typeof jpeg||void 0===jpeg.lossless||void 0===jpeg.lossless.Decoder)throw new Error("No JPEG Lossless decoder loaded");var t=e.bitsAllocated<=8?1:2,n=r.buffer,a=(new jpeg.lossless.Decoder).decode(n,r.byteOffset,r.length,t);return 0===e.pixelRepresentation?16===e.bitsAllocated?e.pixelData=new Uint16Array(a.buffer):e.pixelData=new Uint8Array(a.buffer):e.pixelData=new Int16Array(a.buffer),e},g=t(1),v=t(2);r.a=function(e,r,t,n,a){var o=(new Date).getTime();if("1.2.840.10008.1.2"===r)e=c(e,t);else if("1.2.840.10008.1.2.1"===r)e=c(e,t);else if("1.2.840.10008.1.2.2"===r)e=f(e,t);else if("1.2.840.10008.1.2.1.99"===r)e=c(e,t);else if("1.2.840.10008.1.2.5"===r)e=d(e,t);else if("1.2.840.10008.1.2.4.50"===r)e=p(e,t);else if("1.2.840.10008.1.2.4.51"===r)e=p(e,t);else if("1.2.840.10008.1.2.4.57"===r)e=m(e,t);else if("1.2.840.10008.1.2.4.70"===r)e=m(e,t);else if("1.2.840.10008.1.2.4.80"===r)e=Object(g.a)(e,t);else if("1.2.840.10008.1.2.4.81"===r)e=Object(g.a)(e,t);else if("1.2.840.10008.1.2.4.90"===r)e=Object(v.a)(e,t,n,a);else{if("1.2.840.10008.1.2.4.91"!==r)throw new Error("no decoder for transfer syntax ".concat(r));e=Object(v.a)(e,t,n,a)}var i=void 0!==e.pixelRepresentation&&1===e.pixelRepresentation,l=i&&void 0!==e.bitsStored?32-e.bitsStored:void 0;if(i&&void 0!==l)for(var s=0;s<e.pixelData.length;s++)e.pixelData[s]=e.pixelData[s]<<l>>l;var u=(new Date).getTime();return e.decodeTimeInMS=u-o,e}},function(e,r,t){"use strict";t.r(r);var n=function(e,r){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var t=e.length/3,n=0,a=0,o=0;o<t;o++)r[a++]=e[n++],r[a++]=e[n++],r[a++]=e[n++],r[a++]=255},a=function(e,r){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var t=e.length/3,n=0,a=0,o=t,i=2*t,l=0;l<t;l++)r[n++]=e[a++],r[n++]=e[o++],r[n++]=e[i++],r[n++]=255},o=function(e,r){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var t=e.length/3,n=0,a=0,o=0;o<t;o++){var i=e[n++],l=e[n++],s=e[n++];r[a++]=i+1.402*(s-128),r[a++]=i-.34414*(l-128)-.71414*(s-128),r[a++]=i+1.772*(l-128),r[a++]=255}},i=function(e,r){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var t=e.length/3,n=0,a=0,o=t,i=2*t,l=0;l<t;l++){var s=e[a++],u=e[o++],c=e[i++];r[n++]=s+1.402*(c-128),r[n++]=s-.34414*(u-128)-.71414*(c-128),r[n++]=s+1.772*(u-128),r[n++]=255}};function x(e,r){for(var t=e.length,n=new Uint8ClampedArray(t),a=0;a<t;++a)n[a]=e[a]>>r;return n}var l=function(e,r){for(var t=e.columns*e.rows,n=e.pixelData,a=e.redPaletteColorLookupTableData,o=e.greenPaletteColorLookupTableData,i=e.bluePaletteColorLookupTableData,l=e.redPaletteColorLookupTableData.length,s=0,u=0,c=e.redPaletteColorLookupTableDescriptor[1],f=8===e.redPaletteColorLookupTableDescriptor[2]?0:8,d=x(a,f),p=x(o,f),m=x(i,f),g=0;g<t;++g){var v=n[s++];v<c?v=0:c+l-1<v?v=l-1:v-=c,r[u++]=d[v],r[u++]=p[v],r[u++]=m[v],r[u++]=255}};function s(e,r){if(e.elements[r]&&6===e.elements[r].length)return[e.uint16(r,0),e.uint16(r,1),e.uint16(r,2)]}function u(e,r,t){for(var n=[],a=e.elements[r],o=0;o<t[0];o++)16===t[2]?n[o]=e.uint16(r,o):n[o]=e.byteArray[o+a.dataOffset];return n}var g=function(e){var r={samplesPerPixel:e.uint16("x00280002"),photometricInterpretation:e.string("x00280004"),rows:e.uint16("x00280010"),columns:e.uint16("x00280011"),bitsAllocated:e.uint16("x00280100"),bitsStored:e.uint16("x00280101"),highBit:e.uint16("x00280102"),pixelRepresentation:e.uint16("x00280103"),planarConfiguration:e.uint16("x00280006"),pixelAspectRatio:e.string("x00280034")};return function(e,r){0===e.uint16("x00280103")?(r.smallestPixelValue=e.uint16("x00280106"),r.largestPixelValue=e.uint16("x00280107")):(r.smallestPixelValue=e.int16("x00280106"),r.largestPixelValue=e.int16("x00280107"))}(e,r),"PALETTE COLOR"===r.photometricInterpretation&&e.elements.x00281101&&function(e,r){r.redPaletteColorLookupTableDescriptor=s(e,"x00281101"),r.greenPaletteColorLookupTableDescriptor=s(e,"x00281102"),r.bluePaletteColorLookupTableDescriptor=s(e,"x00281103"),0===r.redPaletteColorLookupTableDescriptor[0]&&(r.redPaletteColorLookupTableDescriptor[0]=65536,r.greenPaletteColorLookupTableDescriptor[0]=65536,r.bluePaletteColorLookupTableDescriptor[0]=65536);var t=r.redPaletteColorLookupTableDescriptor[0],n=e.elements.x00281201.length===t?8:16;r.redPaletteColorLookupTableDescriptor[2]!==n&&(r.redPaletteColorLookupTableDescriptor[2]=n,r.greenPaletteColorLookupTableDescriptor[2]=n,r.bluePaletteColorLookupTableDescriptor[2]=n),r.redPaletteColorLookupTableData=u(e,"x00281201",r.redPaletteColorLookupTableDescriptor),r.greenPaletteColorLookupTableData=u(e,"x00281202",r.greenPaletteColorLookupTableDescriptor),r.bluePaletteColorLookupTableData=u(e,"x00281203",r.bluePaletteColorLookupTableDescriptor)}(e,r),r};function c(e,r){var t=r.uint16("x00283002",0);0===t&&(t=65535);for(var n={id:"1",firstValueMapped:0===e?r.uint16("x00283002",1):r.int16("x00283002",1),numBitsPerEntry:r.uint16("x00283002",2),lut:[]},a=0;a<t;a++)n.lut[a]=0===e?r.uint16("x00283006",a):r.int16("x00283006",a);return n}var v=function(e,r){if(r&&r.items.length){for(var t=[],n=0;n<r.items.length;n++){var a=c(e,r.items[n].dataSet);a&&t.push(a)}return t}};var h=function(e){var r=e.string("x00080016");if("1.2.840.10008.5.1.4.1.1.2"===r||"1.2.840.10008.5.1.4.1.1.2.1"===r)return 1;var t=e.floatString("x00281052"),n=e.floatString("x00281053");return void 0===t||void 0===n?e.elements.x00283000&&0<e.elements.x00283000.length?0:e.uint16("x00280103"):function(e){var r=e.uint16("x00280103"),t=e.uint16("x00280101");return 0===r?0:-1<<t-1}(e)*n+t<0?1:0};var w=function(e,r,t){var n=[],a=e.string(r);if(a){var o=a.split("\\");if(!(t&&o.length<t)){for(var i=0;i<o.length;i++)n.push(parseFloat(o[i]));return n}}};var d=function(e,r,t){return r=r||0,e&&e.Value?e.Value.length<=r?t:e.Value[r]:t};function f(e,r,t){var n=d(e,r,t);if(void 0!==n)return parseFloat(n)}var p=function(e,r){var t=d(e,r);if(void 0!==t)return parseFloat(t)};var m=function(e,r){if(e&&e.Value&&!(r&&e.Value.length<r)){for(var t=[],n=0;n<e.Value.length;n++)t.push(parseFloat(e.Value[n]));return t}},b=[];var y={add:function(e,r){b[e]=r},get:function(e){return b[e]},remove:function(e){b[e]=void 0},purge:function(){b=[]}};function P(e,r){var t=ce.dicomParser,n=y.get(r);if(n){if("generalSeriesModule"===e)return{modality:d(n["00080060"]),seriesInstanceUID:d(n["0020000e"]),seriesNumber:p(n["00200011"]),studyInstanceUID:d(n["0020000d"]),seriesDate:t.parseDA(d(n["00080021"])),seriesTime:t.parseTM(d(n["00080031"],0,""))};if("patientStudyModule"===e)return{patientAge:p(n["00101010"]),patientSize:p(n["00101020"]),patientWeight:p(n["00101030"])};if("imagePlaneModule"===e){var a=m(n["00200037"],6),o=m(n["00200032"],3),i=m(n["00280030"],2),l=null,s=null;i&&(s=i[0],l=i[1]);var u=null,c=null;return a&&(u=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])],c=[parseFloat(a[3]),parseFloat(a[4]),parseFloat(a[5])]),{frameOfReferenceUID:d(n["00200052"]),rows:p(n["00280010"]),columns:p(n["00280011"]),imageOrientationPatient:a,rowCosines:u,columnCosines:c,imagePositionPatient:o,sliceThickness:p(n["00180050"]),sliceLocation:p(n["00201041"]),pixelSpacing:i,rowPixelSpacing:s,columnPixelSpacing:l}}if("imagePixelModule"===e)return{samplesPerPixel:p(n["00280002"]),photometricInterpretation:d(n["00280004"]),rows:p(n["00280010"]),columns:p(n["00280011"]),bitsAllocated:p(n["00280100"]),bitsStored:p(n["00280101"]),highBit:d(n["00280102"]),pixelRepresentation:p(n["00280103"]),planarConfiguration:p(n["00280006"]),pixelAspectRatio:d(n["00280034"]),smallestPixelValue:p(n["00280106"]),largestPixelValue:p(n["00280107"]),redPaletteColorLookupTableDescriptor:m(n["00281101"]),greenPaletteColorLookupTableDescriptor:m(n["00281102"]),bluePaletteColorLookupTableDescriptor:m(n["00281103"]),redPaletteColorLookupTableData:m(n["00281201"]),greenPaletteColorLookupTableData:m(n["00281202"]),bluePaletteColorLookupTableData:m(n["00281203"])};if("voiLutModule"===e)return{windowCenter:m(n["00281050"],1),windowWidth:m(n["00281051"],1)};if("modalityLutModule"===e)return{rescaleIntercept:p(n["00281052"]),rescaleSlope:p(n["00281053"]),rescaleType:d(n["00281054"])};if("sopCommonModule"===e)return{sopClassUID:d(n["00080016"]),sopInstanceUID:d(n["00080018"])};if("petIsotopeModule"===e){var f=d(n["00540016"]);if(void 0===f)return;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:t.parseTM(d(f["00181072"],0,"")),radionuclideTotalDose:p(f["00181074"]),radionuclideHalfLife:p(f["00181075"])}}}}}function D(e,r,t){if(t+e.length>r.length)return!1;for(var n=t,a=0;a<e.length;a++)if(e[a]!==r[n++])return!1;return!0}var T=function(e,r,t){t=t||0;for(var n=function(e){for(var r=new Uint8Array(e.length),t=0,n=e.length;t<n;t++)r[t]=e.charCodeAt(t);return r}(r),a=t;a<e.length;a++)if(n[0]===e[a]&&D(n,e,a))return a;return-1},I={beforeSend:function(){},imageCreated:function(){},strict:!1,useWebWorkers:!0,decodeConfig:{usePDFJS:!1}};function C(e){I=Object.assign(I,e)}function k(){return I}var A=function(o,i){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},s=ce.cornerstone,u=k();return new Promise(function(r,t){var n=new XMLHttpRequest;n.open("get",o,!0),n.responseType="arraybuffer",u.beforeSend(n,i,a,l),Object.keys(a).forEach(function(e){n.setRequestHeader(e,a[e])}),l.deferred={resolve:r,reject:t},l.url=o,l.imageId=i,n.onloadstart=function(e){u.onloadstart&&u.onloadstart(e,l);var r={url:o,imageId:i};s.triggerEvent(s.events,"cornerstoneimageloadstart",r)},n.onloadend=function(e){u.onloadend&&u.onloadend(e,l);var r={url:o,imageId:i};s.triggerEvent(s.events,"cornerstoneimageloadend",r)},n.onreadystatechange=function(e){u.onreadystatechange?u.onreadystatechange(e,l):4===n.readyState&&(200===n.status?r(n.response,n):t(n))},n.onprogress=function(e){var r,t,n=e.loaded;e.lengthComputable&&(r=e.total,t=Math.round(n/r*100)),u.onprogress&&u.onprogress(e,l);var a={url:o,imageId:i,loaded:n,total:r,percentComplete:t};s.triggerEvent(s.events,"cornerstoneimageloadprogress",a)},n.send()})},L={xhrRequest:A,setOptions:C,getOptions:k};var S=function(e,r){var t={accept:2<arguments.length&&void 0!==arguments[2]?arguments[2]:"application/octet-stream"};return new Promise(function(s,u){A(e,r,t).then(function(e){var r=new Uint8Array(e),t=T(r,"\r\n\r\n");-1===t&&u(new Error("invalid response - no multipart mime header"));var n=function(e,r,t){r=r||0,t=t||e.length-r;for(var n="",a=r;a<r+t;a++)n+=String.fromCharCode(e[a]);return n}(r,0,t).split("\r\n"),a=function(e){for(var r=0;r<e.length;r++)if("--"===e[r].substr(0,2))return e[r]}(n);a||u(new Error("invalid response - no boundary marker"));var o=t+4,i=T(r,a,o);-1===i&&u(new Error("invalid response - terminating boundary not found"));var l=i-o-2;s({contentType:function(e){for(var r=0;r<e.length;r++)if("Content-Type:"===e[r].substr(0,13))return e[r].substr(13).trim()}(n),imageFrame:{pixelData:new Uint8Array(e,o,l)}})})})};var E,O=function(e){var r=ce.cornerstone.metaData.get("imagePixelModule",e);return{samplesPerPixel:r.samplesPerPixel,photometricInterpretation:r.photometricInterpretation,planarConfiguration:r.planarConfiguration,rows:r.rows,columns:r.columns,bitsAllocated:r.bitsAllocated,bitsStored:r.bitsStored,pixelRepresentation:r.pixelRepresentation,smallestPixelValue:r.smallestPixelValue,largestPixelValue:r.largestPixelValue,redPaletteColorLookupTableDescriptor:r.redPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:r.greenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:r.bluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:r.redPaletteColorLookupTableData,greenPaletteColorLookupTableData:r.greenPaletteColorLookupTableData,bluePaletteColorLookupTableData:r.bluePaletteColorLookupTableData,pixelData:void 0}},M=0,B=[],R=[],_=k(),W={maxWebWorkers:navigator.hardwareConcurrency||1,startWebWorkersOnDemand:!0,webWorkerPath:"../../dist/cornerstoneWADOImageLoaderWebWorker.js",webWorkerTaskPaths:[],taskConfiguration:{decodeTask:{loadCodecsOnStartup:!0,initializeCodecsOnStartup:!1,codecsPath:"../dist/cornerstoneWADOImageLoaderCodecs.js",usePDFJS:!1,strict:_.strict}}},U={maxWebWorkers:0,numWebWorkers:0,numTasksQueued:0,numTasksExecuting:0,numTasksCompleted:0,totalTaskTimeInMS:0,totalTimeDelayedInMS:0};function V(){if(B.length){for(var e=0;e<R.length;e++)if("ready"===R[e].status){R[e].status="busy";var r=B.shift();r.start=(new Date).getTime();var t=(new Date).getTime();return U.totalTimeDelayedInMS+=t-r.added,R[e].task=r,R[e].worker.postMessage({taskType:r.taskType,workerIndex:e,data:r.data},r.transferList),void U.numTasksExecuting++}R.length<E.maxWebWorkers&&j()}}function F(e){if("initialize"===e.data.taskType)R[e.data.workerIndex].status="ready",V();else{var r=R[e.data.workerIndex].task.start;R[e.data.workerIndex].task.deferred.resolve(e.data.result),R[e.data.workerIndex].task=void 0,U.numTasksExecuting--,R[e.data.workerIndex].status="ready",U.numTasksCompleted++;var t=(new Date).getTime();U.totalTaskTimeInMS+=t-r,V()}}function j(){if(!(R.length>=E.maxWebWorkers)){var e=new Worker(E.webWorkerPath);R.push({worker:e,status:"initializing"}),e.addEventListener("message",F),e.postMessage({taskType:"initialize",workerIndex:R.length-1,config:E})}}function G(e){if(e=e||W,E)throw new Error("WebWorkerManager already initialized");if((E=e).maxWebWorkers=E.maxWebWorkers||navigator.hardwareConcurrency||1,!E.startWebWorkersOnDemand)for(var r=0;r<E.maxWebWorkers;r++)j()}var J={initialize:G,loadWebWorkerTask:function(e,r){E.webWorkerTaskPaths.push(e),r&&(E.taskConfiguration=Object.assign(E.taskConfiguration,r));for(var t=0;t<R.length;t++)R[t].worker.postMessage({taskType:"loadWebWorkerTask",workerIndex:R.length-1,sourcePath:e,config:E})},addTask:function(e,r){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length?arguments[3]:void 0;E||G();var a,o={},i=new Promise(function(e,r){o={resolve:e,reject:r}});for(a=0;a<B.length&&!(B[a].priority<t);a++);var l=M++;return B.splice(a,0,{taskId:l,taskType:e,status:"ready",added:(new Date).getTime(),data:r,deferred:o,priority:t,transferList:n}),V(),{taskId:l,promise:i}},getStatistics:function(){return U.maxWebWorkers=E.maxWebWorkers,U.numWebWorkers=R.length,U.numTasksQueued=B.length,U},setTaskPriority:function(e){for(var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=0;t<B.length;t++)if(B[t].taskId===e){var n=B.splice(t,1)[0];for(n.priority=r,t=0;t<B.length&&!(B[t].priority<r);t++);return B.splice(t,0,n),!0}return!1},cancelTask:function(e,r){for(var t=0;t<B.length;t++){if(B[t].taskId===e)return B.splice(t,1).deferred.reject(r),!0}return!1}},z=t(0);function q(e){return function(r){var t;try{return decodeURIComponent(escape(r))}catch(e){if((t=e)instanceof URIError)return r;throw t}}(String.fromCharCode.apply(null,Array.prototype.slice.apply(new Uint8Array(e))))}var Y=function(i,e,l){var s=(new Date).getTime(),t=new Blob([e],{type:"image/jpeg"});return new Promise(function(o,r){var e=new FileReader;void 0===e.readAsBinaryString?e.readAsArrayBuffer(t):e.readAsBinaryString(t),e.onload=function(){var a=new Image;a.onload=function(){l.height=a.height,l.width=a.width,i.rows=a.height,i.columns=a.width;var e=l.getContext("2d");e.drawImage(this,0,0);var r=e.getImageData(0,0,a.width,a.height),t=(new Date).getTime();i.pixelData=r.data,i.imageData=r,i.decodeTimeInMS=t-s;var n=Object(z.a)(i.pixelData);i.smallestPixelValue=n.min,i.largestPixelValue=n.max,o(i)},a.onerror=function(e){r(e)},void 0===e.readAsBinaryString?a.src="data:image/jpeg;base64,".concat(window.btoa(q(e.result))):a.src="data:image/jpeg;base64,".concat(window.btoa(e.result))},e.onerror=function(e){r(e)}})},N=t(5),H=t(4),K=t(2),Q=t(1),X=!1;function Z(a,o,i,l){var e=l.priority||void 0,r=l.transferPixelData?[i.buffer]:void 0,t=k(),s=t.strict,u=t.decodeConfig;return!1===t.useWebWorkers?(!1===X&&(Object(K.b)(u),Object(Q.b)(u),X=!0),new Promise(function(e,r){try{var t=[a,o,i,u,l],n=N.a.apply(void 0,t);Object(H.a)(n,s),e(n)}catch(e){r(e)}})):J.addTask("decodeTask",{imageFrame:a,transferSyntax:o,pixelData:i,options:l},e,r).promise}function $(e){return"RGB"===e||"PALETTE COLOR"===e||"YBR_FULL"===e||"YBR_FULL_422"===e||"YBR_PARTIAL_422"===e||"YBR_PARTIAL_420"===e||"YBR_RCT"===e||"YBR_ICT"===e}var ee=function(e,t,r,n){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};return"1.2.840.10008.1.2"===t?Z(e,t,r,a):"1.2.840.10008.1.2.1"===t?Z(e,t,r,a):"1.2.840.10008.1.2.2"===t?Z(e,t,r,a):"1.2.840.10008.1.2.1.99"===t?Z(e,t,r,a):"1.2.840.10008.1.2.5"===t?Z(e,t,r,a):"1.2.840.10008.1.2.4.50"===t?8!==e.bitsAllocated||3!==e.samplesPerPixel&&4!==e.samplesPerPixel?Z(e,t,r,a):Y(e,r,n):"1.2.840.10008.1.2.4.51"===t?Z(e,t,r,a):"1.2.840.10008.1.2.4.57"===t?Z(e,t,r,a):"1.2.840.10008.1.2.4.70"===t?Z(e,t,r,a):"1.2.840.10008.1.2.4.80"===t?Z(e,t,r,a):"1.2.840.10008.1.2.4.81"===t?Z(e,t,r,a):"1.2.840.10008.1.2.4.90"===t?Z(e,t,r,a):"1.2.840.10008.1.2.4.91"===t?Z(e,t,r,a):new Promise(function(e,r){r(new Error("No decoder for transfer syntax ".concat(t)))})};function re(e,r){0===e.planarConfiguration?n(e.pixelData,r):a(e.pixelData,r)}function te(e,r){var t=r.data;if("RGB"===e.photometricInterpretation)re(e,t);else if("YBR_RCT"===e.photometricInterpretation)re(e,t);else if("YBR_ICT"===e.photometricInterpretation)re(e,t);else if("PALETTE COLOR"===e.photometricInterpretation)l(e,t);else if("YBR_FULL_422"===e.photometricInterpretation)re(e,t);else{if("YBR_FULL"!==e.photometricInterpretation)throw new Error("No color space conversion for photometric interpretation ".concat(e.photometricInterpretation));!function(e,r){0===e.planarConfiguration?o(e.pixelData,r):i(e.pixelData,r)}(e,t)}}var ne=function(e,r){if(r=r||e.transferSyntax,8===e.bitsAllocated&&"1.2.840.10008.1.2.4.50"===r&&(3===e.samplesPerPixel||4===e.samplesPerPixel))return!0};var ae=function(m,e,g,r){if(!e||!e.length)return Promise.reject(new Error("The file does not contain image data."));var v=ce.cornerstone,x=document.createElement("canvas"),t=O(m),n=ee(t,g,e,x,r);return new Promise(function(p,e){n.then(function(e){var r=v.metaData.get("imagePlaneModule",m)||{},t=v.metaData.get("voiLutModule",m)||{},n=v.metaData.get("modalityLutModule",m)||{},a=v.metaData.get("sopCommonModule",m)||{},o=$(e.photometricInterpretation);if(!ne(e,g)&&(function(e){32===e.bitsAllocated?e.pixelData=new Float32Array(e.pixelData):16===e.bitsAllocated?0===e.pixelRepresentation?e.pixelData=new Uint16Array(e.pixelData):e.pixelData=new Int16Array(e.pixelData):e.pixelData=new Uint8Array(e.pixelData)}(e),o)){x.height=e.rows,x.width=e.columns;var i=x.getContext("2d").createImageData(e.columns,e.rows);te(e,i),e.imageData=i,e.pixelData=i.data;var l=Object(z.a)(e.pixelData);e.smallestPixelValue=l.min,e.largestPixelValue=l.max}var s={imageId:m,color:o,columnPixelSpacing:r.columnPixelSpacing,columns:e.columns,height:e.rows,intercept:n.rescaleIntercept?n.rescaleIntercept:0,invert:"MONOCHROME1"===e.photometricInterpretation,minPixelValue:e.smallestPixelValue,maxPixelValue:e.largestPixelValue,rowPixelSpacing:r.rowPixelSpacing,rows:e.rows,sizeInBytes:e.pixelData.length,slope:n.rescaleSlope?n.rescaleSlope:1,width:e.columns,windowCenter:t.windowCenter?t.windowCenter[0]:void 0,windowWidth:t.windowWidth?t.windowWidth[0]:void 0,decodeTimeInMS:e.decodeTimeInMS,floatPixelData:void 0};if(e.pixelData instanceof Float32Array){var u=e.pixelData,c=function(e){for(var r=Object(z.a)(e),t=Math.abs(r.max-r.min)/65535,n=r.min,a=e.length,o=new Uint16Array(a),i=65535,l=0,s=0;s<a;s++){var u=Math.floor((e[s]-n)/t);o[s]=u,i=Math.min(i,u),l=Math.max(l,u)}return{min:i,max:l,intPixelData:o,slope:t,intercept:n}}(u);s.minPixelValue=c.min,s.maxPixelValue=c.max,s.slope=c.slope,s.intercept=c.intercept,s.floatPixelData=u,s.getPixelData=function(){return c.intPixelData}}else s.getPixelData=function(){return e.pixelData};if(s.color&&(s.getCanvas=function(){}),n.modalityLUTSequence&&0<n.modalityLUTSequence.length&&function(e){return"1.2.840.10008.5.1.4.1.1.12.1"!==e&&"1.2.840.10008.5.1.4.1.1.12.2.1"!==e}(a.sopClassUID)&&(s.modalityLUT=n.modalityLUTSequence[0]),t.voiLUTSequence&&0<t.voiLUTSequence.length&&(s.voiLUT=t.voiLUTSequence[0]),s.color&&(s.windowWidth=255,s.windowCenter=127),void 0===s.windowCenter||void 0===s.windowWidth){var f=s.maxPixelValue*s.slope+s.intercept,d=s.minPixelValue*s.slope+s.intercept;s.windowWidth=f-d,s.windowCenter=(f+d)/2}x=null,p(s)},e)})};function oe(o,i){var l=(new Date).getTime(),r=o.substring(7);return{promise:new Promise(function(n,a){if(void 0===y.get(o)){var e=new Error("no metadata for imageId ".concat(o));return a(e)}S(r,o,'multipart/related; type="image/jpeg"').then(function(e){var r=function(e){var r="1.2.840.10008.1.2";if(!e)return r;var t=e.split(";"),n={};t.forEach(function(e){var r=e.split("=");if(2===r.length){var t=r[1].trim().replace(/"/g,"");n[r[0].trim()]=t}});var a={"image/jpeg":"1.2.840.10008.1.2.4.50","image/x-dicom-rle":"1.2.840.10008.1.2.5","image/x-jls":"1.2.840.10008.1.2.4.80","image/jp2":"1.2.840.10008.1.2.4.90","image/jpx":"1.2.840.10008.1.2.4.92"};return n["transfer-syntax"]?n["transfer-syntax"]:e&&!Object.keys(n).length&&a[e]?a[e]:n.type&&a[n.type]?a[n.type]:r}(e.contentType),t=e.imageFrame.pixelData;ae(o,t,r,i).then(function(e){var r=(new Date).getTime();e.loadTimeInMS=r-l,n(e)},a)},a)}),cancelFn:void 0}}var ie={metaData:{getNumberString:f,getNumberValue:p,getNumberValues:m,getValue:d,metaDataProvider:P},findIndexOfString:T,getPixelData:S,loadImage:oe,metaDataManager:y,register:function(e){e.registerImageLoader("wadors",oe),e.metaData.addProvider(P)}};var le,se,ue=function(e){ie.register(e),Ae.register(e)},ce={set cornerstone(e){ue(le=e)},get cornerstone(){if(!le){if(!window||!window.cornerstone)throw new Error("cornerstoneWADOImageLoader requires a copy of Cornerstone to work properly. Please add cornerstoneWADOImageLoader.external.cornerstone = cornerstone; to your application.");le=window.cornerstone,ue(le)}return le},set dicomParser(e){se=e},get dicomParser(){if(!se){if(!window||!window.dicomParser)throw new Error("cornerstoneWADOImageLoader requires a copy of dicomParser to work properly. Please add cornerstoneWADOImageLoader.external.dicomParser = dicomParser; to your application.");se=window.dicomParser}return se}};var fe=function(e){var r,t=e.indexOf(":"),n=e.substring(t+1),a=n.indexOf("frame=");if(-1!==a){var o=n.substr(a+6);r=parseInt(o,10),n=n.substr(0,a-1)}return{scheme:e.substr(0,t),url:n,frame:r}},de=0,pe={},me={};function ge(){return{cacheSizeInBytes:de,numberOfDataSetsCached:Object.keys(pe).length}}var ve={isLoaded:function(e){return void 0!==pe[e]},load:function(o){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:A,r=2<arguments.length?arguments[2]:void 0,i=ce.cornerstone,l=ce.dicomParser;if(pe[o])return new Promise(function(e){pe[o].cacheCount++,e(pe[o].dataSet)});if(me[o])return me[o].cacheCount++,me[o];var t=e(o,r),s=new Promise(function(n,a){t.then(function(e){var r,t=new Uint8Array(e);try{r=l.parseDicom(t)}catch(e){return a(e)}pe[o]={dataSet:r,cacheCount:s.cacheCount},de+=r.byteArray.length,n(r),i.triggerEvent(i.events,"datasetscachechanged",{uri:o,action:"loaded",cacheInfo:ge()})},a).then(function(){delete me[o]},function(){delete me[o]})});return s.cacheCount=1,me[o]=s},unload:function(e){var r=ce.cornerstone;pe[e]&&(pe[e].cacheCount--,0===pe[e].cacheCount&&(de-=pe[e].dataSet.byteArray.length,delete pe[e],r.triggerEvent(r.events,"datasetscachechanged",{uri:e,action:"unloaded",cacheInfo:ge()})))},getInfo:ge,purge:function(){pe={},me={}},get:function(e){if(pe[e])return pe[e].dataSet}};function xe(e,r){var t=ce.dicomParser,n=fe(r),a=ve.get(n.url);if(a){if("generalSeriesModule"===e)return{modality:a.string("x00080060"),seriesInstanceUID:a.string("x0020000e"),seriesNumber:a.intString("x00200011"),studyInstanceUID:a.string("x0020000d"),seriesDate:t.parseDA(a.string("x00080021")),seriesTime:t.parseTM(a.string("x00080031")||"")};if("patientStudyModule"===e)return{patientAge:a.intString("x00101010"),patientSize:a.floatString("x00101020"),patientWeight:a.floatString("x00101030")};if("imagePlaneModule"===e){var o=w(a,"x00200037",6),i=w(a,"x00200032",3),l=w(a,"x00280030",2),s=null,u=null;l&&(u=l[0],s=l[1]);var c=null,f=null;return o&&(c=[parseFloat(o[0]),parseFloat(o[1]),parseFloat(o[2])],f=[parseFloat(o[3]),parseFloat(o[4]),parseFloat(o[5])]),{frameOfReferenceUID:a.string("x00200052"),rows:a.uint16("x00280010"),columns:a.uint16("x00280011"),imageOrientationPatient:o,rowCosines:c,columnCosines:f,imagePositionPatient:i,sliceThickness:a.floatString("x00180050"),sliceLocation:a.floatString("x00201041"),pixelSpacing:l,rowPixelSpacing:u,columnPixelSpacing:s}}if("imagePixelModule"===e)return g(a);if("modalityLutModule"===e)return{rescaleIntercept:a.floatString("x00281052"),rescaleSlope:a.floatString("x00281053"),rescaleType:a.string("x00281054"),modalityLUTSequence:v(a.uint16("x00280103"),a.elements.x00283000)};if("voiLutModule"===e){var d=h(a);return{windowCenter:w(a,"x00281050",1),windowWidth:w(a,"x00281051",1),voiLUTSequence:v(d,a.elements.x00283010)}}if("sopCommonModule"===e)return{sopClassUID:a.string("x00080016"),sopInstanceUID:a.string("x00080018")};if("petIsotopeModule"===e){var p=a.elements.x00540016;if(void 0===p)return;var m=p.items[0].dataSet;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:t.parseTM(m.string("x00181072")||""),radionuclideTotalDose:m.floatString("x00181074"),radionuclideHalfLife:m.floatString("x00181075")}}}}}var he=[];var we={add:function(e){var r=he.push(e);return"dicomfile:".concat(r-1)},get:function(e){return he[e]},remove:function(e){he[e]=void 0},purge:function(){he=[]}};function be(e,r){var t=ce.dicomParser;if(e.elements.x7fe00010&&e.elements.x7fe00010.basicOffsetTable.length)return t.readEncapsulatedImageFrame(e,e.elements.x7fe00010,r);if(function(e){return e.intString("x00280008")!==e.elements.x7fe00010.fragments.length}(e)){var n=t.createJPEGBasicOffsetTable(e,e.elements.x7fe00010);return t.readEncapsulatedImageFrame(e,e.elements.x7fe00010,r,n)}return t.readEncapsulatedPixelDataFromFragments(e,e.elements.x7fe00010,r)}var ye=function(e,r,t){for(var n=new Uint8Array(t),a=0;a<t;a++){var o=e[Math.floor(a/8)+r],i=a%8;n[a]=o&1<<i?1:0}return n};var Pe=function(e,r){var t,n=e.elements.x7fe00010||e.elements.x7fe00008,a=e.uint16("x00280100"),o=e.uint16("x00280010"),i=e.uint16("x00280011"),l=e.uint16("x00280002"),s=n.dataOffset,u=o*i*l;if(8===a){if((t=s+r*u)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,t,u)}if(16===a){if((t=s+r*u*2)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,t,2*u)}if(1===a){if((t=s+r*u*.125)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return ye(e.byteArray,t,u)}if(32!==a)throw new Error("unsupported pixel format");if((t=s+r*u*4)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,t,4*u)};var De=function(e){var r=fe(e),t=parseInt(r.url,10),n=we.get(t);return new Promise(function(t,e){var r=new FileReader;r.onload=function(e){var r=e.target.result;t(r)},r.onerror=e,r.readAsArrayBuffer(n)})};var Te=function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=e.elements.x7fe00010||e.elements.x7fe00008;return t?t.encapsulatedPixelData?be(e,r):Pe(e,r):null};function Ie(e,l){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,u=3<arguments.length?arguments[3]:void 0,c=4<arguments.length?arguments[4]:void 0,f=5<arguments.length?arguments[5]:void 0,d=(new Date).getTime(),p={cancelFn:void 0};return p.promise=new Promise(function(o,i){e.then(function(t){var e=Te(t,s),r=t.string("x00020010"),n=(new Date).getTime(),a=ae(l,e,r,c);!function(e,r){e.decache=function(){var e=fe(r);ve.unload(e.url)}}(p,l),a.then(function(e){e.data=t,e.sharedCacheKey=u;var r=(new Date).getTime();e.loadTimeInMS=n-d,e.totalTimeInMS=r-d,void 0!==f&&void 0!==f.imageDoneCallback&&f.imageDoneCallback(e),o(e)},function(e){i({error:e,dataSet:t})})},function(e){i({error:e})})}),p}function Ce(e){return"dicomweb"===e||"wadouri"===e?A:"dicomfile"===e?De:void 0}function ke(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=fe(e),n=(r=Object.assign({},r)).loader;return void 0===n?n=Ce(t.scheme):delete r.loader,ve.isLoaded(t.url)?function(i,l,e,r,t){var s=2<arguments.length&&void 0!==e?e:0,u=3<arguments.length?r:void 0,c=4<arguments.length?t:void 0,f=(new Date).getTime();return{promise:new Promise(function(t,r){var e,n=(new Date).getTime();try{var a=Te(i,s),o=i.string("x00020010");e=ae(l,a,o,c)}catch(e){return void r({error:e,dataSet:i})}e.then(function(e){e.data=i,e.sharedCacheKey=u;var r=(new Date).getTime();e.loadTimeInMS=n-f,e.totalTimeInMS=r-f,t(e)},r)}),cancelFn:void 0}}(ve.get(t.url,n,e),e,t.frame,t.url,r):Ie(ve.load(t.url,n,e),e,t.frame,t.url,r)}var Ae={metaData:{getImagePixelModule:g,getLUTs:v,getModalityLUTOutputPixelRepresentation:h,getNumberValues:w,metaDataProvider:xe},dataSetCacheManager:ve,fileManager:we,getEncapsulatedImageFrame:be,getUncompressedImageFrame:Pe,loadFileRequest:De,loadImageFromPromise:Ie,getLoaderForScheme:Ce,loadImage:ke,parseImageId:fe,unpackBinaryFrame:ye,register:function(e){e.registerImageLoader("dicomweb",ke),e.registerImageLoader("wadouri",ke),e.registerImageLoader("dicomfile",ke),e.metaData.addProvider(xe)}};function Le(e){C(e)}var Se=t(3);t.d(r,"convertRGBColorByPixel",function(){return n}),t.d(r,"convertRGBColorByPlane",function(){return a}),t.d(r,"convertYBRFullByPixel",function(){return o}),t.d(r,"convertYBRFullByPlane",function(){return i}),t.d(r,"convertPALETTECOLOR",function(){return l}),t.d(r,"wadouri",function(){return Ae}),t.d(r,"wadors",function(){return ie}),t.d(r,"configure",function(){return Le}),t.d(r,"convertColorSpace",function(){return te}),t.d(r,"createImage",function(){return ae}),t.d(r,"decodeImageFrame",function(){return ee}),t.d(r,"decodeJPEGBaseline8BitColor",function(){return Y}),t.d(r,"getImageFrame",function(){return O}),t.d(r,"getMinMax",function(){return z.a}),t.d(r,"isColorImage",function(){return $}),t.d(r,"isJPEGBaseline8BitColor",function(){return ne}),t.d(r,"webWorkerManager",function(){return J}),t.d(r,"version",function(){return Se.a}),t.d(r,"internal",function(){return L}),t.d(r,"external",function(){return ce});var Ee={convertRGBColorByPixel:n,convertRGBColorByPlane:a,convertYBRFullByPixel:o,convertYBRFullByPlane:i,convertPALETTECOLOR:l,wadouri:Ae,wadors:ie,configure:Le,convertColorSpace:te,createImage:ae,decodeImageFrame:ee,decodeJPEGBaseline8BitColor:Y,getImageFrame:O,getMinMax:z.a,isColorImage:$,isJPEGBaseline8BitColor:ne,webWorkerManager:J,version:Se.a,internal:L,external:ce};r.default=Ee}],a.c=n,a.d=function(e,r,t){a.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(r,e){if(1&e&&(r=a(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var n in r)a.d(t,n,function(e){return r[e]}.bind(null,n));return t},a.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(r,"a",r),r},a.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},a.p="",a(a.s=6);function a(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}var t,n});
//# sourceMappingURL=cornerstoneWADOImageLoader.min.js.map